<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>music21.alpha.webapps &mdash; music21 Documentation</title>
    
    <link rel="stylesheet" href="../_static/m21.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="top" title="music21 Documentation" href="../index.html" />
    <link rel="up" title="Module Reference" href="index.html" />
    <link rel="next" title="music21.alpha.webapps.apps" href="moduleAlphaWebappsApps.html" />
    <link rel="prev" title="music21.alpha.trecento.trecentoCadence" href="moduleAlphaTrecentoTrecentoCadence.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'>
<script src='http://artusi.xyz/music21j/ext/require/require.js'></script>
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="moduleAlphaWebappsApps.html" title="music21.alpha.webapps.apps"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="moduleAlphaTrecentoTrecentoCadence.html" title="music21.alpha.trecento.trecentoCadence"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">music21</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Module Reference</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="moduleAlphaTrecentoTrecentoCadence.html"
                        title="previous chapter">music21.alpha.trecento.trecentoCadence</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="moduleAlphaWebappsApps.html"
                        title="next chapter">music21.alpha.webapps.apps</a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">music21.alpha.webapps</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#agenda">Agenda</a></li>
<li><a class="reference internal" href="#commandprocessor">CommandProcessor</a></li>
</ul>
</li>
</ul>

<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Music21</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usersGuide/index.html">User&#8217;s Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Module Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developerReference/index.html">Developer Reference</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/moduleReference/moduleAlphaWebapps.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="music21-alpha-webapps">
<span id="modulealphawebapps"></span><h1>music21.alpha.webapps<a class="headerlink" href="#music21-alpha-webapps" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-music21.alpha.webapps"></span><p>Webapps is a module designed for using music21 with a webserver.</p>
<p>This file includes the classes and functions used to parse and process 
requests to music21 running on a server.</p>
<p>For information about how to set up a server to use music21, look at the files in webapps.server
For examples of application-specific commands and templates, see webapps.apps
For details about various output template options available, see webapps.templates</p>
<p><strong>Overview of Processing a Request</strong></p>
<p>1. The GET and POST data from the request are combined into an agenda object. 
The POST data can be in the formats <code class="docutils literal"><span class="pre">'application/json',</span> <span class="pre">'multipart/form-data'</span> <span class="pre">or</span> 
<span class="pre">'application/x-www-form-urlencoded'</span></code>. 
For more information, see the documentation for Agenda and makeAgendaFromRequest</p>
<p>2. If an appName is specified, additional data and commands are added to the agenda. 
For more information, see the applicationInitializers in apps.py.</p>
<ol class="arabic simple" start="3">
<li>A CommandProcessor is created for the agenda</li>
</ol>
<p>4. The processor parses its dataDict into primitives or music21 objects and saves them 
to a parsedDataDict. For more information, see <code class="docutils literal"><span class="pre">commandProcessor._parseData()</span></code></p>
<p>5. The processor executes its commandList, modifying its internal parsedDataDict. 
For more information, see <code class="xref py py-meth docutils literal"><span class="pre">executeCommands()</span></code></p>
<p>6. If outputTemplate is specified, the processor uses a template to generate and output. 
For more information, see <code class="xref py py-meth docutils literal"><span class="pre">getOutput()</span></code> 
and the templates in templates.py</p>
<p>7. Otherwise, the data will be returned as JSON, where the variables in the agenda&#8217;s 
returnDict specify which variables to include in the returned JSON.</p>
<ol class="arabic simple" start="8">
<li>If an error occurs, an error message will be returned to the user</li>
</ol>
<p><strong>Full JSON Example:</strong></p>
<p>Below is an example of a complete JSON request:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;dataDict&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;myNum&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;fmt&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;23&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span> 
    <span class="s2">&quot;returnDict&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;myNum&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;ho&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span>
    <span class="p">},</span> 
    <span class="s2">&quot;commandList&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;corpus.parse&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;argList&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;&#39;bwv7.7&#39;&quot;</span>
            <span class="p">],</span> 
            <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span> <span class="s2">&quot;sc&quot;</span>
        <span class="p">},</span> 
        <span class="p">{</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;transpose&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;argList&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;&#39;p5&#39;&quot;</span>
            <span class="p">],</span> 
            <span class="s2">&quot;caller&quot;</span><span class="p">:</span> <span class="s2">&quot;sc&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span> <span class="s2">&quot;sc&quot;</span>
        <span class="p">},</span> 
        <span class="p">{</span>
            <span class="s2">&quot;attribute&quot;</span><span class="p">:</span> <span class="s2">&quot;flat&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;caller&quot;</span><span class="p">:</span> <span class="s2">&quot;sc&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span> <span class="s2">&quot;scFlat&quot;</span>
        <span class="p">},</span> 
        <span class="p">{</span>
            <span class="s2">&quot;attribute&quot;</span><span class="p">:</span> <span class="s2">&quot;highestOffset&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;caller&quot;</span><span class="p">:</span> <span class="s2">&quot;scFlat&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span> <span class="s2">&quot;ho&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="music21.alpha.webapps.ModWSGIApplication">
<code class="descclassname">music21.alpha.webapps.</code><code class="descname">ModWSGIApplication</code><span class="sig-paren">(</span><em>environ</em>, <em>start_response</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.ModWSGIApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Application function in proper format for a mod_wsgi Application:
Reads the contents of a post request, and passes the data string to
webapps.processDataString for further processing.</p>
<p>For an example of how to install this application on a server see 
music21.webapps.server.wsgiapp.py</p>
<p>The request to the application should have the following structures:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21.ext.six</span> <span class="k">import</span> <span class="n">StringIO</span>
</pre></div>
</div>
<p>environ is usually created by the server. Manually constructing dictionary for demonstrated</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">environ</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
<p>wsgi.input is usually a buffer containing the contents of a POST request. 
Here we&#8217;re using StringIO to demonstrate</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wsgiInput</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unused</span> <span class="o">=</span> <span class="n">wsgiInput</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{&quot;dataDict&quot;:{&quot;a&quot;:{&quot;data&quot;:3}},&quot;returnDict&quot;:{&quot;a&quot;:&quot;int&quot;}}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unused</span> <span class="o">=</span> <span class="n">wsgiInput</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;wsgi.input&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wsgiInput</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;QUERY_STRING&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCUMENT_ROOT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;/Library/WebServer/Documents&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ciconia.mit.edu&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SCRIPT_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;/music21/unifiedinterface&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;application/json&quot;</span>
</pre></div>
</div>
<p>usually called by mod_wsgi server. Used to initiate response</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">start_response</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">status</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="kc">None</span> 
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">ModWSGIApplication</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">)</span>
<span class="go">[...&#39;{&quot;dataDict&quot;: {&quot;a&quot;: ...}, &quot;errorList&quot;: [], &quot;status&quot;: &quot;success&quot;}&#39;]    </span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="music21.alpha.webapps.makeAgendaFromRequest">
<code class="descclassname">music21.alpha.webapps.</code><code class="descname">makeAgendaFromRequest</code><span class="sig-paren">(</span><em>requestInput</em>, <em>environ</em>, <em>requestType=None</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.makeAgendaFromRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines information from POST data and server info into an agenda object
that can be used with the CommandProcessor.</p>
<p>Takes in a file-like requestInput (has <code class="docutils literal"><span class="pre">.read()</span></code>) containing POST data,
a dictionary-like environ from the server containing at a minimum a value for the 
keys QUERY_STRING,
and a requestType specifying the content-type of the POST data 
(&#8216;application/json&#8217;,&#8217;multipart/form-data&#8217;, etc.)</p>
<p>Note that variables specified via query string will be returned as a list if
they are specified more than once (e.g. <code class="docutils literal"><span class="pre">?b=3&amp;b=4</span></code> will yeld <code class="docutils literal"><span class="pre">['3',</span> <span class="pre">'4']</span></code> 
as the value of b</p>
<p>requestInput should be buffer from the server application. Using StringIO for demonstration</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21.ext.six</span> <span class="k">import</span> <span class="n">StringIO</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">requestInput</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unused</span> <span class="o">=</span> <span class="n">requestInput</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{&quot;dataDict&quot;:{&quot;a&quot;:{&quot;data&quot;:3}}}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unused</span> <span class="o">=</span> <span class="n">requestInput</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environ</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;QUERY_STRING&quot;</span><span class="p">:</span><span class="s2">&quot;b=3&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">makeAgendaFromRequest</span><span class="p">(</span><span class="n">requestInput</span><span class="p">,</span> <span class="n">environ</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [],</span>
<span class="go"> &#39;dataDict&#39;: {&#39;a&#39;: {&#39;data&#39;: 3}, &#39;b&#39;: {&#39;data&#39;: &#39;3&#39;}},</span>
<span class="go"> &#39;returnDict&#39;: {}}</span>
</pre></div>
</div>
<p>(the ellipses above comment out the u unicode prefix in PY2)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">environ2</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;QUERY_STRING&quot;</span><span class="p">:</span><span class="s2">&quot;a=2&amp;b=3&amp;b=4&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda2</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">makeAgendaFromRequest</span><span class="p">(</span><span class="n">requestInput</span><span class="p">,</span> <span class="n">environ2</span><span class="p">,</span> 
<span class="gp">... </span>                  <span class="s1">&#39;multipart/form-data&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the 3 in a:data becomes &#8216;2&#8217; &#8211; a string.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda2</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [],</span>
<span class="go"> &#39;dataDict&#39;: {&#39;a&#39;: {&#39;data&#39;: &#39;2&#39;}, &#39;b&#39;: {&#39;data&#39;: [&#39;3&#39;, &#39;4&#39;]}},</span>
<span class="go"> &#39;returnDict&#39;: {}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="music21.alpha.webapps.setupApplication">
<code class="descclassname">music21.alpha.webapps.</code><code class="descname">setupApplication</code><span class="sig-paren">(</span><em>agenda</em>, <em>appName=None</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.setupApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an agenda, determines which application is desired either from the appName parameter
or if the appName parameter is none, from the value associated with the &#8220;appName&#8221; key 
in the agenda.</p>
<p>If the application name is a valid application name, calls the 
appropriate application initializer
from music21.webapps.apps.py on the agenda.</p>
</dd></dl>

</div>
<div class="section" id="agenda">
<h2>Agenda<a class="headerlink" href="#agenda" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="music21.alpha.webapps.Agenda">
<em class="property">class </em><code class="descclassname">music21.alpha.webapps.</code><code class="descname">Agenda</code><a class="headerlink" href="#music21.alpha.webapps.Agenda" title="Permalink to this definition">¶</a></dt>
<dd><p>Subclass of dictionary that represents data and commands to be processed by a CommandProcessor.</p>
<p>The Agenda contains the following keys:</p>
<ul>
<li><p class="first"><strong>&#8216;dataDict&#8217;</strong> whose value is a dictionary specifying data to be input to the 
processor of the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;dataDict&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&quot;&lt;VARIABLE_1_NAME&gt;&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;VARIABLE_1_DATA&gt;&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;fmt&quot;</span><span class="p">:</span>  <span class="s2">&quot;&lt;VARIABLE_1_FMT&gt;&quot;</span><span class="p">},</span>
              <span class="s2">&quot;&lt;VARIABLE_2_NAME&gt;&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;VARIABLE_2_DATA&gt;&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;fmt&quot;</span><span class="p">:</span>  <span class="s2">&quot;&lt;VARIABLE_2_FMT&gt;&quot;</span><span class="p">},</span>
              <span class="n">etc</span><span class="o">.</span>
              <span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
<p>where the variable formats are elements of availableDataFormats (&#8220;str&#8221;,&#8221;int&#8221;,&#8221;musicxml&#8221;, etc.)</p>
<ul>
<li><p class="first"><strong>&#8216;commandList&#8217;</strong>  whose value is a list specifying commands to be executed by the 
processor of the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;commandList&quot;</span> <span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;&lt;CMD_1_TYPE&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;CMD_2_COMMAND_NAME&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span>    <span class="s2">&quot;&lt;CMD_1_RESULT_VARIABLE&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;caller&quot;</span><span class="p">:</span>       <span class="s2">&quot;&lt;CMD_1_CALLER&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;command&quot;</span><span class="p">:</span>      <span class="s2">&quot;&lt;CMD_1_COMMAND_NAME&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;argList&quot;</span><span class="p">:</span>      <span class="p">[</span><span class="s1">&#39;&lt;CMD_1_ARG_1&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;CMD_1_ARG_2&gt;&#39;</span><span class="o">...</span><span class="p">]},</span>                   
                  <span class="s2">&quot;&lt;CMD_2_TYPE&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;CMD_2_COMMAND_NAME&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span>    <span class="s2">&quot;&lt;CMD_2_RESULT_VARIABLE&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;caller&quot;</span><span class="p">:</span>       <span class="s2">&quot;&lt;CMD_2_CALLER&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;argList&quot;</span><span class="p">:</span>      <span class="p">[</span><span class="s1">&#39;&lt;CMD_2_ARG_1&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;CMD_2_ARG_2&gt;&#39;</span><span class="o">...</span><span class="p">]},</span>
                  <span class="n">etc</span><span class="o">.</span>
                  <span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
<p>Calling <code class="xref py py-meth docutils literal"><span class="pre">executeCommands()</span></code> iterates through 
the commandList sequentially, calling the equivalent of 
<a href="#id1"><span class="problematic" id="id2">``</span></a>&lt;CMD_n_RESULT_VARAIBLE&gt; = &lt;CMD_n_CALLER&gt;.&lt;CMD_n_COMMAND_NAME&gt;(&lt;CMD_n_ARG_1&gt;,</p>
<blockquote>
<div>&lt;CMD_n_ARG_2&gt;...)``</div></blockquote>
<p>where the command TYPE is &#8220;function&#8221;, &#8220;method&#8221;, or &#8220;attribute&#8221;</p>
<ul>
<li><p class="first"><strong>&#8216;returnDict&#8217;</strong> whose value is a list specifying the variables to be 
returned from the server:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;returnDict&quot;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&quot;&lt;VARIABLE_1_NAME&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;VARIABLE_1_FORMAT&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&lt;VARIABLE_2_NAME&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;VARIABLE_2_FORMAT&quot;</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span><span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
<p>returnDict is used to limit JSON output to only the relevant variables. 
If returnDict is not specified,
the entire set of variables in the processor&#8217;s environment will be returned in string format.</p>
<ul class="simple">
<li><strong>&#8216;outputTemplate&#8217;</strong>  which specifies the return template to be used</li>
<li><strong>&#8216;outputArgList&#8217;</strong>   which specifies what arguments to pass the return template</li>
</ul>
</dd></dl>

<p class="rubric"><a class="reference internal" href="#music21.alpha.webapps.Agenda" title="music21.alpha.webapps.Agenda"><code class="xref py py-class docutils literal"><span class="pre">Agenda</span></code></a> methods</p>
<dl class="method">
<dt id="music21.alpha.webapps.Agenda.addCommand">
<code class="descclassname">Agenda.</code><code class="descname">addCommand</code><span class="sig-paren">(</span><em>commandType</em>, <em>resultVar</em>, <em>caller</em>, <em>command</em>, <em>argList=None</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.Agenda.addCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the specified command to the commandList of the agenda. <cite>commandType</cite> is 
either &#8220;function&#8221;, &#8220;attribute&#8221; or method. 
resultVar, caller, and command are strings that will result in the form shown below. 
Set an argument as 
none to 
argList should be a list of data encoded in an appropriate 
format (see <code class="xref py py-meth docutils literal"><span class="pre">parseInputToPrimitive()</span></code> 
for more information)</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">&lt;resultVar&gt;</span> <span class="pre">=</span> <span class="pre">&lt;caller&gt;.&lt;command&gt;(&lt;argList&gt;)</span></code></div></blockquote>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">Agenda</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [], &#39;dataDict&#39;: {}, &#39;returnDict&#39;: {}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">,</span><span class="s1">&#39;sc&#39;</span><span class="p">,</span><span class="s1">&#39;sc&#39;</span><span class="p">,</span><span class="s1">&#39;transpose&#39;</span><span class="p">,[</span><span class="s1">&#39;p5&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [{&#39;argList&#39;: [&#39;p5&#39;],</span>
<span class="go">                  &#39;caller&#39;: &#39;sc&#39;,</span>
<span class="go">                  &#39;method&#39;: &#39;transpose&#39;,</span>
<span class="go">                  &#39;resultVar&#39;: &#39;sc&#39;}],</span>
<span class="go"> &#39;dataDict&#39;: {},</span>
<span class="go"> &#39;returnDict&#39;: {}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span><span class="s1">&#39;attribute&#39;</span><span class="p">,</span><span class="s1">&#39;scFlat&#39;</span><span class="p">,</span><span class="s1">&#39;sc&#39;</span><span class="p">,</span><span class="s1">&#39;flat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [{&#39;argList&#39;: [&#39;p5&#39;],</span>
<span class="go">                  &#39;caller&#39;: &#39;sc&#39;,</span>
<span class="go">                  &#39;method&#39;: &#39;transpose&#39;,</span>
<span class="go">                  &#39;resultVar&#39;: &#39;sc&#39;},</span>
<span class="go">                 {&#39;attribute&#39;: &#39;flat&#39;, &#39;caller&#39;: &#39;sc&#39;, &#39;resultVar&#39;: &#39;scFlat&#39;}],</span>
<span class="go"> &#39;dataDict&#39;: {},</span>
<span class="go"> &#39;returnDict&#39;: {}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.Agenda.addData">
<code class="descclassname">Agenda.</code><code class="descname">addData</code><span class="sig-paren">(</span><em>variableName</em>, <em>data</em>, <em>fmt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.Agenda.addData" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a variable name, data, and optionally format, constructs the proper 
dataDictElement structure,
and adds it to the dataDict of the agenda.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">Agenda</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [], &#39;dataDict&#39;: {}, &#39;returnDict&#39;: {}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [], &#39;dataDict&#39;: {&#39;a&#39;: {&#39;data&#39;: 2}}, &#39;returnDict&#39;: {}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">variableName</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;list&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [],</span>
<span class="go"> &#39;dataDict&#39;: {&#39;a&#39;: {&#39;data&#39;: 2}, &#39;b&#39;: {&#39;data&#39;: [1, 2, 3], &#39;fmt&#39;: &#39;list&#39;}},</span>
<span class="go"> &#39;returnDict&#39;: {}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.Agenda.getData">
<code class="descclassname">Agenda.</code><code class="descname">getData</code><span class="sig-paren">(</span><em>variableName</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.Agenda.getData" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a variable name, returns the data stored in the agenda for that variable name. 
If no data is stored,
returns the value None.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">Agenda</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [], &#39;dataDict&#39;: {}, &#39;returnDict&#39;: {}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.Agenda.loadJson">
<code class="descclassname">Agenda.</code><code class="descname">loadJson</code><span class="sig-paren">(</span><em>jsonRequestStr</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.Agenda.loadJson" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs json.loads on jsonRequestStr and loads the resulting structure into the agenda object.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span> <span class="c1">## pprint stablizes dictionary order</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">Agenda</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [], &#39;dataDict&#39;: {}, &#39;returnDict&#39;: {}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">loadJson</span><span class="p">(</span><span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">sampleJsonStringSimple</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [],</span>
<span class="go"> &#39;dataDict&#39;: {&#39;myNum&#39;: {&#39;data&#39;: &#39;23&#39;, &#39;fmt&#39;: &#39;int&#39;}},</span>
<span class="go"> &#39;returnDict&#39;: {&#39;myNum&#39;: &#39;int&#39;}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.Agenda.setOutputTemplate">
<code class="descclassname">Agenda.</code><code class="descname">setOutputTemplate</code><span class="sig-paren">(</span><em>outputTemplate</em>, <em>outputArgList</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.Agenda.setOutputTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the output template that will be used for the agenda.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span> <span class="k">as</span> <span class="n">pp</span> <span class="c1">## pprint stablizes dictionary order</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">Agenda</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [], &#39;dataDict&#39;: {}, &#39;returnDict&#39;: {}}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">setOutputTemplate</span><span class="p">(</span><span class="s1">&#39;templates.noteflightEmbed&#39;</span><span class="p">,[</span><span class="s1">&#39;sc&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="go">{&#39;commandList&#39;: [],</span>
<span class="go"> &#39;dataDict&#39;: {},</span>
<span class="go"> &#39;outputArgList&#39;: [&#39;sc&#39;],</span>
<span class="go"> &#39;outputTemplate&#39;: &#39;templates.noteflightEmbed&#39;,</span>
<span class="go"> &#39;returnDict&#39;: {}}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="commandprocessor">
<h2>CommandProcessor<a class="headerlink" href="#commandprocessor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="music21.alpha.webapps.CommandProcessor">
<em class="property">class </em><code class="descclassname">music21.alpha.webapps.</code><code class="descname">CommandProcessor</code><span class="sig-paren">(</span><em>agenda</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.CommandProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes server request for music21.</p>
<p>Takes an Agenda (dict) as input, containing the keys:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s1">&#39;dataDict&#39;</span>
<span class="s1">&#39;commandList&#39;</span>
<span class="s1">&#39;returnDict&#39;</span>
<span class="s1">&#39;outputTemplate&#39;</span>
<span class="s1">&#39;outputArgList&#39;</span>
</pre></div>
</div>
</dd></dl>

<p class="rubric"><a class="reference internal" href="#music21.alpha.webapps.CommandProcessor" title="music21.alpha.webapps.CommandProcessor"><code class="xref py py-class docutils literal"><span class="pre">CommandProcessor</span></code></a> methods</p>
<dl class="method">
<dt id="music21.alpha.webapps.CommandProcessor.executeAttributeCommand">
<code class="descclassname">CommandProcessor.</code><code class="descname">executeAttributeCommand</code><span class="sig-paren">(</span><em>commandElement</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.CommandProcessor.executeAttributeCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the attribute command specified by commandElement</p>
<p>Function command elements should be dictionaries of the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="s2">&quot;&lt;ATTRIBUTE_NAME&gt;&quot;</span><span class="p">,</span>
 <span class="s1">&#39;caller&#39;</span><span class="p">:</span> <span class="s2">&quot;&lt;CALLER_VARIABLE&gt;&quot;</span><span class="p">,</span>
 <span class="s1">&#39;resultVar&#39;</span> <span class="p">:</span> <span class="s2">&quot;&lt;RESULT_VARIABLE&gt;&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Executing it yields the equivalent of: 
<code class="docutils literal"><span class="pre">&lt;RESULT_VARIABLE&gt;</span> <span class="pre">=</span> <span class="pre">&lt;CALLER_VARIABLE&gt;.&lt;ATTRIBUTE_NAME&gt;.</span></code></p>
<p>All three keys &#8216;attributeName&#8217;, &#8216;caller&#8217;, and &#8216;resultVar&#8217; are required.</p>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.CommandProcessor.executeCommands">
<code class="descclassname">CommandProcessor.</code><code class="descname">executeCommands</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.CommandProcessor.executeCommands" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses JSON Commands specified in the self.commandList</p>
<p>In the JSON, commands are described by:</p>
<p><strong>&#8216;commandList&#8217;</strong>  whose value is a list specifying commands to be executed by 
the processor of the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;commandList&quot;</span> <span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;&lt;CMD_1_TYPE&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;CMD_2_COMMAND_NAME&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span>    <span class="s2">&quot;&lt;CMD_1_RESULT_VARIABLE&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;caller&quot;</span><span class="p">:</span>       <span class="s2">&quot;&lt;CMD_1_CALLER&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;command&quot;</span><span class="p">:</span>      <span class="s2">&quot;&lt;CMD_1_COMMAND_NAME&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;argList&quot;</span><span class="p">:</span>      <span class="p">[</span><span class="s1">&#39;&lt;CMD_1_ARG_1&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;CMD_1_ARG_2&gt;&#39;</span><span class="o">...</span><span class="p">]},</span>
                  
                  <span class="s2">&quot;&lt;CMD_2_TYPE&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;CMD_2_COMMAND_NAME&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span>    <span class="s2">&quot;&lt;CMD_2_RESULT_VARIABLE&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;caller&quot;</span><span class="p">:</span>       <span class="s2">&quot;&lt;CMD_2_CALLER&gt;&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;argList&quot;</span><span class="p">:</span>      <span class="p">[</span><span class="s1">&#39;&lt;CMD_2_ARG_1&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;CMD_2_ARG_2&gt;&#39;</span><span class="o">...</span><span class="p">]},</span>
                  <span class="n">etc</span><span class="o">.</span>
                  <span class="p">]</span>
</pre></div>
</div>
<p>Calling .executeCommands() iterates through the commandList sequentially, 
calling the equivalent of:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">CMD_n_RESULT_VARAIBLE</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">CMD_n_CALLER</span><span class="o">&gt;.&lt;</span><span class="n">CMD_n_COMMAND_NAME</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">CMD_n_ARG_1</span><span class="o">&gt;</span><span class="p">,</span> 
    <span class="o">&lt;</span><span class="n">CMD_n_ARG_2</span><span class="o">&gt;...</span><span class="p">)</span>
</pre></div>
</div>
<p>where the command TYPE is &#8220;function&#8221; (no caller), &#8220;method&#8221; (has a caller), or &#8220;attribute&#8221;</p>
<p>See <code class="xref py py-meth docutils literal"><span class="pre">executeFunctionCommand()</span></code>, 
<code class="xref py py-meth docutils literal"><span class="pre">executeMethodCommand()</span></code>, 
and <code class="xref py py-meth docutils literal"><span class="pre">executeAttributeCommand()</span></code> 
for more information about the format
required for those commands.</p>
<p>EXAMPLE:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;commandList:&quot;</span><span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;function&quot;</span><span class="p">:</span><span class="s2">&quot;corpus.parse&quot;</span><span class="p">,</span>
     <span class="s2">&quot;argList&quot;</span><span class="p">:[</span><span class="s2">&quot;&#39;bwv7.7&#39;&quot;</span><span class="p">],</span>
     <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span><span class="s2">&quot;sc&quot;</span><span class="p">},</span>
     
    <span class="p">{</span><span class="s2">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;transpose&quot;</span><span class="p">,</span>
     <span class="s2">&quot;caller&quot;</span><span class="p">:</span><span class="s2">&quot;sc&quot;</span><span class="p">,</span>
     <span class="s2">&quot;argList&quot;</span><span class="p">:[</span><span class="s2">&quot;&#39;p5&#39;&quot;</span><span class="p">],</span>
     <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span><span class="s2">&quot;sc&quot;</span><span class="p">},</span>
     
    
    <span class="p">{</span><span class="s2">&quot;attribute&quot;</span><span class="p">:</span><span class="s2">&quot;flat&quot;</span><span class="p">,</span>
     <span class="s2">&quot;caller&quot;</span><span class="p">:</span><span class="s2">&quot;sc&quot;</span><span class="p">,</span>
     <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span><span class="s2">&quot;scFlat&quot;</span><span class="p">},</span>
     
    <span class="p">{</span><span class="s2">&quot;attribute&quot;</span><span class="p">:</span><span class="s2">&quot;higestOffset&quot;</span><span class="p">,</span>
     <span class="s2">&quot;caller&quot;</span><span class="p">:</span><span class="s2">&quot;scFlat&quot;</span><span class="p">,</span>
     <span class="s2">&quot;resultVar&quot;</span><span class="p">:</span><span class="s2">&quot;ho&quot;</span><span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.CommandProcessor.executeFunctionCommand">
<code class="descclassname">CommandProcessor.</code><code class="descname">executeFunctionCommand</code><span class="sig-paren">(</span><em>commandElement</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.CommandProcessor.executeFunctionCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the function command specified by commandElement.</p>
<p>Function command elements should be dictionaries of the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="s2">&quot;&lt;FUNCTION_NAME&gt;&quot;</span><span class="p">,</span>
 <span class="s1">&#39;argList&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&lt;ARG_1&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;ARG_2&gt;&quot;</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span><span class="p">],</span>
 <span class="s1">&#39;resultVar&#39;</span> <span class="p">:</span> <span class="s2">&quot;&lt;RESULT_VARIABLE&gt;&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Executing it yields the equivalent of: 
<code class="docutils literal"><span class="pre">&lt;RESULT_VARIABLE&gt;</span> <span class="pre">=</span> <span class="pre">&lt;FUNCTION_NAME&gt;(ARG_1,</span> <span class="pre">ARG_2,</span> <span class="pre">...)</span></code></p>
<p>The keys argList and resultVar are optional. A commandElement without argList will 
just call <code class="docutils literal"><span class="pre">&lt;FUNCTION_NAME&gt;()</span></code>
with no arguments and a commandElement without resutlVar will not assign the result 
of the function to any variable.</p>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.CommandProcessor.executeMethodCommand">
<code class="descclassname">CommandProcessor.</code><code class="descname">executeMethodCommand</code><span class="sig-paren">(</span><em>commandElement</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.CommandProcessor.executeMethodCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s2">&quot;&lt;METHOD_NAME&gt;&quot;</span><span class="p">,</span>
 <span class="s1">&#39;caller&#39;</span><span class="p">:</span> <span class="s2">&quot;&lt;CALLER_VARIABLE&gt;&quot;</span><span class="p">,</span>
 <span class="s1">&#39;argList&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&lt;ARG_1&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;ARG_2&gt;&quot;</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span><span class="p">],</span>
 <span class="s1">&#39;resultVar&#39;</span> <span class="p">:</span> <span class="s2">&quot;&lt;RESULT_VARIABLE&gt;&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Executing it yields the equivalent of 
<code class="docutils literal"><span class="pre">&lt;RESULT_VARIABLE&gt;</span> <span class="pre">=</span> <span class="pre">&lt;CALLER_VARIABLE&gt;.&lt;METHOD_NAME&gt;(ARG_1,</span> <span class="pre">ARG_2,</span> <span class="pre">...)</span></code></p>
<p>The keys argList and resultVar are optional. A commandElement without argList will 
just call <code class="docutils literal"><span class="pre">&lt;CALLER_VARIABLE&gt;.&lt;METHOD_NAME&gt;()</span></code>
with no arguments and a commandElement without resutlVar will not assign the result 
of the function to any variable.</p>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.CommandProcessor.getErrorStr">
<code class="descclassname">CommandProcessor.</code><code class="descname">getErrorStr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.CommandProcessor.getErrorStr" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts self.errorList into a string</p>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.CommandProcessor.getOutput">
<code class="descclassname">CommandProcessor.</code><code class="descname">getOutput</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.CommandProcessor.getOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the output of the processor. Uses the attributes outputTemplate and 
outputArgList from the agenda
to determine which format the output should be in. If an outputTemplate is 
unspecified or known,
will return json by default.</p>
<p>Return is of the style (output, outputType) where outputType is a 
content-type ready for returning 
to the server:
&#8220;text/plain&#8221;, &#8220;application/json&#8221;, &#8220;text/html&#8221;, etc.</p>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.CommandProcessor.getResultObject">
<code class="descclassname">CommandProcessor.</code><code class="descname">getResultObject</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.CommandProcessor.getResultObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new object ready for json parsing with the string values of the objects
specified in self.returnDict in the formats specified in self.returnDict:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;returnDict&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;myNum&quot;</span> <span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ho&quot;</span>    <span class="p">:</span> <span class="s2">&quot;int&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.CommandProcessor.parseInputToPrimitive">
<code class="descclassname">CommandProcessor.</code><code class="descname">parseInputToPrimitive</code><span class="sig-paren">(</span><em>inpVal</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.CommandProcessor.parseInputToPrimitive" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines what format a given input is in and returns a value in that format..
First checks if it is the name of a variable defined in the parsedDataDict or the
name of an allowable function. In either of these cases, it will return the actual value
of the data or the actual function.</p>
<p>Next, it will check if the string is an int, float, boolean, or none, 
returning the appropriate value.
If it is a quoted string then it will remove the quotes on the ends and 
return it as a string.
If it has square braces indicating a list, the inner elements will be 
parsed using this same function recursively.
(Note that recursive lists like [1, 2, [3, 4]] are not yet supported</p>
<p>If the input corresponds to none of these types, it is returned as a string.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">Agenda</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">agenda</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="s2">&quot;list&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">.</span><span class="n">webapps</span><span class="o">.</span><span class="n">CommandProcessor</span><span class="p">(</span><span class="n">agenda</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;True&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;False&quot;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;&#39;hi&#39;&quot;</span><span class="p">)</span>
<span class="go">&#39;hi&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;&#39;Madam I&#39;m Adam&#39;&quot;</span><span class="p">)</span>
<span class="go">&quot;Madam I&#39;m Adam&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;[1,2,3]&quot;</span><span class="p">)</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span><span class="o">.</span><span class="n">parseInputToPrimitive</span><span class="p">(</span><span class="s2">&quot;[1,&#39;hi&#39;,3.0,True, a, justAStr]&quot;</span><span class="p">)</span>
<span class="go">[1, &#39;hi&#39;, 3.0, True, 2, &#39;justAStr&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.alpha.webapps.CommandProcessor.recordError">
<code class="descclassname">CommandProcessor.</code><code class="descname">recordError</code><span class="sig-paren">(</span><em>errorString</em>, <em>exceptionObj=None</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.alpha.webapps.CommandProcessor.recordError" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an error to the internal errorList array and prints the whole error to stderr
so both the user and the administrator know. Error string represents a brief, 
human-readable
message decribing the error.</p>
<p>Errors are appended to the errorList as a tuple (errorString, errorTraceback) where 
errorTraceback
is the traceback of the exception if exceptionObj is specified, otherwise 
errorTraceback is the empty string</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="moduleAlphaWebappsApps.html" title="music21.alpha.webapps.apps"
             >next</a> |</li>
        <li class="right" >
          <a href="moduleAlphaTrecentoTrecentoCadence.html" title="music21.alpha.trecento.trecentoCadence"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">music21</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Module Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006-2016, Michael Scott Cuthbert and cuthbertLab.
      Last updated on Aug 21, 2016.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>