<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuring Environment Settings &mdash; music21 Documentation</title>
    
    <link rel="stylesheet" href="../_static/m21.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="top" title="music21 Documentation" href="../index.html" />
    <link rel="up" title="Tutorials" href="index.html" />
    <link rel="next" title="Graphing Utilities" href="graphing.html" />
    <link rel="prev" title="Tutorials" href="index.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'>
<script src='http://artusi.xyz/music21j/ext/require/require.js'></script>
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="graphing.html" title="Graphing Utilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Tutorials"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">music21</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Tutorials</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Tutorials</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="graphing.html"
                        title="next chapter">Graphing Utilities</a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Configuring Environment Settings</a><ul>
<li><a class="reference internal" href="#creating-and-configuring-the-usersettings-object">Creating and Configuring the UserSettings Object</a></li>
<li><a class="reference internal" href="#location-of-environment-configuration-files">Location of Environment Configuration Files</a></li>
<li><a class="reference internal" href="#important-tools-that-may-use-environment-settings">Important Tools that May Use Environment Settings</a><ul>
<li><a class="reference internal" href="#show-methods-and-directoryscratch-showformat-and-writeformat"><cite>show()</cite> Methods and &#8216;directoryScratch&#8217;, &#8216;showFormat&#8217; and &#8216;writeFormat&#8217;</a></li>
<li><a class="reference internal" href="#parseurl-and-parse-functions-and-autodownload"><cite>parseURL()</cite> and <cite>parse()</cite> Functions and &#8216;autoDownload&#8217;</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Music21</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usersGuide/index.html">User&#8217;s Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../moduleReference/index.html">Module Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configuring Environment Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="graphing.html">Graphing Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="advancedGraphing.html">Advanced Graphing Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorialFinaleMac.html">Tutorial: Setting up Finale on Mac</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples and Demonstrations</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developerReference/index.html">Developer Reference</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/tutorials/environment.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuring-environment-settings">
<span id="environment"></span><h1>Configuring Environment Settings<a class="headerlink" href="#configuring-environment-settings" title="Permalink to this headline">¶</a></h1>
<p>Music21 features an environment configuration system which lets users configure
and customize settings.  These settings will be saved so that the next time the
user starts Python, the settings will still work.</p>
<p>Environment configuration is particularly useful for setting default
third-party applications (necessary for handling Music21 output in different
media formats such as MusicXML, Lilypond, and graphics files) and for setting a
default scratch directory (for writing output without providing explitic file
paths).</p>
<p>Environment configuration can be handled with two objects. The
<a class="reference internal" href="../moduleReference/moduleEnvironment.html#music21.environment.Environment" title="music21.environment.Environment"><code class="xref py py-class docutils literal"><span class="pre">Environment</span></code></a> object provides lower-level access
and control, as well as a numerous utiity methods for music21 modules. The
<a class="reference internal" href="../moduleReference/moduleEnvironment.html#music21.environment.UserSettings" title="music21.environment.UserSettings"><code class="xref py py-class docutils literal"><span class="pre">UserSettings</span></code></a> object is a convenience class for
users to quickly set and check settings, and is reccommended for general usage.
For complete information on the Environment and UserSettings objects, see
<a class="reference internal" href="../moduleReference/moduleEnvironment.html#module-music21.environment" title="music21.environment"><code class="xref py py-mod docutils literal"><span class="pre">environment</span></code></a>.</p>
<div class="section" id="creating-and-configuring-the-usersettings-object">
<h2>Creating and Configuring the UserSettings Object<a class="headerlink" href="#creating-and-configuring-the-usersettings-object" title="Permalink to this headline">¶</a></h2>
<p>Environment configuration files are not created by default. To create an
environment configuration file, import environment form Music21 and create an
<a class="reference internal" href="../moduleReference/moduleEnvironment.html#music21.environment.UserSettings" title="music21.environment.UserSettings"><code class="xref py py-class docutils literal"><span class="pre">UserSettings</span></code></a> object. Then, call the
<a class="reference internal" href="../moduleReference/moduleEnvironment.html#music21.environment.UserSettings.create" title="music21.environment.UserSettings.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a> method to create an XML
environment file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">us</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">UserSettings</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">us</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>   
</pre></div>
</div>
<p>After creating an environment file, the resulting XML preference file can be
edited directly by the user. To find where the XML file is written, the
<a class="reference internal" href="../moduleReference/moduleEnvironment.html#music21.environment.UserSettings.getSettingsPath" title="music21.environment.UserSettings.getSettingsPath"><code class="xref py py-meth docutils literal"><span class="pre">getSettingsPath()</span></code></a> method can be called.
This path will be different depending on your platform and/or user name.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">us</span><span class="o">.</span><span class="n">getSettingsPath</span><span class="p">()</span> 
<span class="go">&#39;/Users/ariza/.music21rc&#39;</span>
</pre></div>
</div>
<p>Settings can be edited directly in the XML file or through the UserSettings
object interface. The UserSettings object acts as a Python dictionary. To view
the names of user-configurable parameters, call the keys() method.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">us</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="n">key</span>
<span class="go">&#39;autoDownload&#39;</span>
<span class="go">&#39;braillePath&#39;</span>
<span class="go">&#39;debug&#39;</span>
<span class="go">&#39;directoryScratch&#39;</span>
<span class="go">&#39;graphicsPath&#39;</span>
<span class="go">&#39;ipythonShowFormat&#39;</span>
<span class="go">&#39;lilypondBackend&#39;</span>
<span class="go">&#39;lilypondFormat&#39;</span>
<span class="go">&#39;lilypondPath&#39;</span>
<span class="go">&#39;lilypondVersion&#39;</span>
<span class="go">&#39;localCorporaSettings&#39;</span>
<span class="go">&#39;localCorpusPath&#39;</span>
<span class="go">&#39;localCorpusSettings&#39;</span>
<span class="go">&#39;manualCoreCorpusPath&#39;</span>
<span class="go">&#39;midiPath&#39;</span>
<span class="go">&#39;musescoreDirectPNGPath&#39;</span>
<span class="go">&#39;musicxmlPath&#39;</span>
<span class="go">&#39;pdfPath&#39;</span>
<span class="go">&#39;showFormat&#39;</span>
<span class="go">&#39;vectorPath&#39;</span>
<span class="go">&#39;warnings&#39;</span>
<span class="go">&#39;writeFormat&#39;</span>
</pre></div>
</div>
<p>To set and write a preference, a key and value pair must be provided using
Python dictionary-like syntax. For example, to set the Music21 scratch
directory, the &#8216;directoryScratch&#8217; key can be set to a file path of the user&#8217;s
choice. Changes are made immediately to the environment configuration file. To
see the current setting, the value can be accesed by key.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">us</span><span class="p">[</span><span class="s1">&#39;directoryScratch&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;/_scratch&#39;</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">us</span><span class="p">[</span><span class="s1">&#39;directoryScratch&#39;</span><span class="p">]</span>  
<span class="go">&#39;/_scratch&#39;</span>
</pre></div>
</div>
<p>Note that Music21 objects may need to be reloaded, and/or the Python session
restarted, to have changes made to the UserSettings object take effect.</p>
</div>
<div class="section" id="location-of-environment-configuration-files">
<h2>Location of Environment Configuration Files<a class="headerlink" href="#location-of-environment-configuration-files" title="Permalink to this headline">¶</a></h2>
<p>Environment configuration files are stored in platform-specific locations.</p>
<p>On Linux and MacOS computers, the configuration file is stored as the file
.music21rc, located in the user&#8217;s home directory.</p>
<p>On Windows computers the configuration file is generally located in the
Application Data directory as the file &#8216;music21-settings.xml&#8217;. In some cases
the XML settings file may be stored in the user directory.</p>
<p>The path to the environment settings file can always be found with the
<a class="reference internal" href="../moduleReference/moduleEnvironment.html#music21.environment.UserSettings.getSettingsPath" title="music21.environment.UserSettings.getSettingsPath"><code class="xref py py-meth docutils literal"><span class="pre">getSettingsPath()</span></code></a> method.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">us</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">UserSettings</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">us</span><span class="o">.</span><span class="n">getSettingsPath</span><span class="p">()</span>   
<span class="go">&#39;/Users/ariza/.music21rc&#39;</span>
</pre></div>
</div>
<p>To permanently delete the environment configuration file, call the
<a class="reference internal" href="../moduleReference/moduleEnvironment.html#music21.environment.UserSettings.delete" title="music21.environment.UserSettings.delete"><code class="xref py py-meth docutils literal"><span class="pre">delete()</span></code></a> method.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">us</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">UserSettings</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">us</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>    
</pre></div>
</div>
</div>
<div class="section" id="important-tools-that-may-use-environment-settings">
<h2>Important Tools that May Use Environment Settings<a class="headerlink" href="#important-tools-that-may-use-environment-settings" title="Permalink to this headline">¶</a></h2>
<p>The following important functions and methods will make use of environment
configuration file and are important to properly configure.</p>
<div class="section" id="show-methods-and-directoryscratch-showformat-and-writeformat">
<h3><cite>show()</cite> Methods and &#8216;directoryScratch&#8217;, &#8216;showFormat&#8217; and &#8216;writeFormat&#8217;<a class="headerlink" href="#show-methods-and-directoryscratch-showformat-and-writeformat" title="Permalink to this headline">¶</a></h3>
<p>The show method, inherited from <a class="reference internal" href="../moduleReference/moduleBase.html#music21.base.Music21Object.show" title="music21.base.Music21Object.show"><code class="xref py py-meth docutils literal"><span class="pre">show()</span></code></a>, will,
depending on user settings, write a temporary file in a user specified format
in a user-specified scratch directory.</p>
<p>Setting the <cite>showFormat</cite> key will set the default output format of all calls to
<cite>show()</cite> methods. The behavior can be deviated from by providing an argument to
<cite>show()</cite>.</p>
<p>Setting the <cite>writeFormat</cite> key will set the default output format of all calls
to <cite>write()</cite> methods. The behavior can be deviated from by providing an
argument to <cite>write()</cite>.</p>
<p>Setting the <cite>directoryScratch</cite> key will determine where the file is written. If
this setting is not made, the file will be written in a system-specified
scratch directory. While useful, such temporary files and directories may be
buried deeply in your file system.</p>
</div>
<div class="section" id="parseurl-and-parse-functions-and-autodownload">
<h3><cite>parseURL()</cite> and <cite>parse()</cite> Functions and &#8216;autoDownload&#8217;<a class="headerlink" href="#parseurl-and-parse-functions-and-autodownload" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../moduleReference/moduleConverter.html#music21.converter.parseURL" title="music21.converter.parseURL"><code class="xref py py-func docutils literal"><span class="pre">parseURL()</span></code></a> function, as well as the
<a class="reference internal" href="../moduleReference/moduleCorpus.html#music21.corpus.parse" title="music21.corpus.parse"><code class="xref py py-func docutils literal"><span class="pre">parse()</span></code></a> function, offer the ability to download a files
directly directly from the internet.</p>
<p>Users may configure the &#8216;autoDownload&#8217; key to determine whether downloading is
attempted automatically without prompting the user (&#8216;allow&#8217;), whether the user
is asked first before attempting a download (&#8216;ask&#8217;), or whether downloading is
prohibited (&#8216;deny&#8217;).</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="graphing.html" title="Graphing Utilities"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Tutorials"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">music21</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Tutorials</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006-2016, Michael Scott Cuthbert and cuthbertLab.
      Last updated on Aug 21, 2016.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>